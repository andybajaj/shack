
drop index  FK_JOB_RESPONSE_ID;
drop table CMJL_JOB_ERROR_MESSAGES;
drop index CMJL_JOB_CONTENT_FK;
drop table CMJL_JOB_CONTENT;
drop index CMJL_JOB_RESPONSE_FK;
drop table CMJL_JOB_RESPONSE;
drop index FK_JOB_REQUEST_ID;
drop table CMJL_JOB_REQUEST_PARAMETERS;
drop index CMJL_JOB_REQUEST_FK;
drop table CMJL_JOB_REQUEST;






------------------------------------------
DROP TABLE  CMJL_STEP_EXECUTION_CONTEXT ;
DROP TABLE  CMJL_JOB_EXECUTION_CONTEXT ;
DROP TABLE  CMJL_STEP_EXECUTION ;
DROP TABLE  CMJL_JOB_EXECUTION_PARAMS ;
DROP TABLE  CMJL_JOB_EXECUTION ;
DROP TABLE  CMJL_JOB_INSTANCE ;

DROP SEQUENCE  CMJL_STEP_EXECUTION_SEQ ;
DROP SEQUENCE  CMJL_JOB_EXECUTION_SEQ ;
DROP SEQUENCE  CMJL_JOB_SEQ ;
-- Autogenerated: do not edit this file

CREATE TABLE CMJL_JOB_INSTANCE  (
	JOB_INSTANCE_ID NUMBER(19,0)  NOT NULL PRIMARY KEY ,
	VERSION NUMBER(19,0) ,
	JOB_NAME VARCHAR2(100) NOT NULL,
	JOB_KEY VARCHAR2(32) NOT NULL,
	constraint JOB_INST_UN unique (JOB_NAME, JOB_KEY)
) ;

CREATE TABLE CMJL_JOB_EXECUTION  (
	JOB_EXECUTION_ID NUMBER(19,0)  NOT NULL PRIMARY KEY ,
	VERSION NUMBER(19,0)  ,
	JOB_INSTANCE_ID NUMBER(19,0) NOT NULL,
	CREATE_TIME TIMESTAMP NOT NULL,
	START_TIME TIMESTAMP DEFAULT NULL ,
	END_TIME TIMESTAMP DEFAULT NULL ,
	STATUS VARCHAR2(10) ,
	EXIT_CODE VARCHAR2(2500) ,
	EXIT_MESSAGE VARCHAR2(2500) ,
	LAST_UPDATED TIMESTAMP,
	JOB_CONFIGURATION_LOCATION VARCHAR(2500) NULL,
	constraint JOB_INST_EXEC_FK foreign key (JOB_INSTANCE_ID)
	references CMJL_JOB_INSTANCE(JOB_INSTANCE_ID)
) ;

CREATE TABLE CMJL_JOB_EXECUTION_PARAMS  (
	JOB_EXECUTION_ID NUMBER(19,0) NOT NULL ,
	TYPE_CD VARCHAR2(6) NOT NULL ,
	KEY_NAME VARCHAR2(100) NOT NULL ,
	STRING_VAL VARCHAR2(250) ,
	DATE_VAL TIMESTAMP DEFAULT NULL ,
	LONG_VAL NUMBER(19,0) ,
	DOUBLE_VAL NUMBER ,
	IDENTIFYING CHAR(1) NOT NULL ,
	constraint JOB_EXEC_PARAMS_FK foreign key (JOB_EXECUTION_ID)
	references CMJL_JOB_EXECUTION(JOB_EXECUTION_ID)
) ;

CREATE TABLE CMJL_STEP_EXECUTION  (
	STEP_EXECUTION_ID NUMBER(19,0)  NOT NULL PRIMARY KEY ,
	VERSION NUMBER(19,0) NOT NULL,
	STEP_NAME VARCHAR2(100) NOT NULL,
	JOB_EXECUTION_ID NUMBER(19,0) NOT NULL,
	START_TIME TIMESTAMP NOT NULL ,
	END_TIME TIMESTAMP DEFAULT NULL ,
	STATUS VARCHAR2(10) ,
	COMMIT_COUNT NUMBER(19,0) ,
	READ_COUNT NUMBER(19,0) ,
	FILTER_COUNT NUMBER(19,0) ,
	WRITE_COUNT NUMBER(19,0) ,
	READ_SKIP_COUNT NUMBER(19,0) ,
	WRITE_SKIP_COUNT NUMBER(19,0) ,
	PROCESS_SKIP_COUNT NUMBER(19,0) ,
	ROLLBACK_COUNT NUMBER(19,0) ,
	EXIT_CODE VARCHAR2(2500) ,
	EXIT_MESSAGE VARCHAR2(2500) ,
	LAST_UPDATED TIMESTAMP,
	constraint JOB_EXEC_STEP_FK foreign key (JOB_EXECUTION_ID)
	references CMJL_JOB_EXECUTION(JOB_EXECUTION_ID)
) ;

CREATE TABLE CMJL_STEP_EXECUTION_CONTEXT  (
	STEP_EXECUTION_ID NUMBER(19,0) NOT NULL PRIMARY KEY,
	SHORT_CONTEXT VARCHAR2(2500) NOT NULL,
	SERIALIZED_CONTEXT CLOB ,
	constraint STEP_EXEC_CTX_FK foreign key (STEP_EXECUTION_ID)
	references CMJL_STEP_EXECUTION(STEP_EXECUTION_ID)
) ;

CREATE TABLE CMJL_JOB_EXECUTION_CONTEXT  (
	JOB_EXECUTION_ID NUMBER(19,0) NOT NULL PRIMARY KEY,
	SHORT_CONTEXT VARCHAR2(2500) NOT NULL,
	SERIALIZED_CONTEXT CLOB ,
	constraint JOB_EXEC_CTX_FK foreign key (JOB_EXECUTION_ID)
	references CMJL_JOB_EXECUTION(JOB_EXECUTION_ID)
) ;

CREATE SEQUENCE CMJL_STEP_EXECUTION_SEQ START WITH 0 MINVALUE 0 MAXVALUE 9223372036854775807 NOCYCLE;
CREATE SEQUENCE CMJL_JOB_EXECUTION_SEQ START WITH 0 MINVALUE 0 MAXVALUE 9223372036854775807 NOCYCLE;
CREATE SEQUENCE CMJL_JOB_SEQ START WITH 0 MINVALUE 0 MAXVALUE 9223372036854775807 NOCYCLE;







---------------------------------------------------------------------------


CREATE TABLE "CMJL_JOB_REQUEST" 
   (	"ID" VARCHAR2(255 ) NOT NULL ENABLE, 
	"JOB_EXECUTION_ID" NUMBER(19,0), 
	"JOB_NAME" VARCHAR2(255 ), 
	"DATE_CREATED" TIMESTAMP (6), 
	"DATE_UPDATED" TIMESTAMP (6), 
	 CONSTRAINT "CMJL_JOB_REQUEST_PK" PRIMARY KEY ("ID")  ENABLE, 
	 CONSTRAINT "CMJL_JOB_REQUEST_FK" FOREIGN KEY ("JOB_EXECUTION_ID")
	  REFERENCES "CMJL_JOB_EXECUTION" ("JOB_EXECUTION_ID") ENABLE
   )  ;

  CREATE INDEX "CMJL_JOB_REQUEST_FK" ON "CMJL_JOB_REQUEST" ("JOB_EXECUTION_ID") ;


  CREATE TABLE "CMJL_JOB_REQUEST_PARAMETERS" 
   (	"ID" VARCHAR2(255 ) NOT NULL ENABLE, 
	"JOB_REQUEST_ID" VARCHAR2(255 ) NOT NULL ENABLE, 
	"PARA_NAME" VARCHAR2(255 ), 
	"PARA_VALUE" VARCHAR2(2500 ), 
	 PRIMARY KEY ("ID") ENABLE, 
	 CONSTRAINT "FK_JOB_REQUEST_ID" FOREIGN KEY ("JOB_REQUEST_ID")
	  REFERENCES "CMJL_JOB_REQUEST" ("ID") ENABLE
   )  ;

  CREATE INDEX "FK_JOB_REQUEST_ID" ON "CMJL_JOB_REQUEST_PARAMETERS" ("JOB_REQUEST_ID") ;


CREATE TABLE "CMJL_JOB_RESPONSE" 
   (	"ID" VARCHAR2(255 CHAR) NOT NULL ENABLE, 
	"JOB_EXECUTION_ID" NUMBER(19,0) NOT NULL ENABLE, 
	"JOB_RESULT" VARCHAR2(100 ), 
	"JOB_RUNTIME_STATUS" VARCHAR2(10 ), 
	"ERROR_MESSAGE_BLOCK" VARCHAR2(4000 CHAR), 
	"DATE_CREATED" TIMESTAMP (6), 
	"DATE_MODIFIED" TIMESTAMP (6), 
	 CONSTRAINT "JOB_RESPONSE_PK" PRIMARY KEY ("ID") ENABLE, 
	 CONSTRAINT "CMJL_JOB_RESPONSE_FK" FOREIGN KEY ("JOB_EXECUTION_ID")
	  REFERENCES "CMJL_JOB_EXECUTION" ("JOB_EXECUTION_ID") ENABLE
   ) ;

  CREATE INDEX "CMJL_JOB_RESPONSE_FK" ON "CMJL_JOB_RESPONSE" ("JOB_EXECUTION_ID") ;


CREATE TABLE "CMJL_JOB_CONTENT" 
   (	"ID" VARCHAR2(255 ) NOT NULL ENABLE, 
	"JOB_REQ_RESP_ID" VARCHAR2(255 ), 
	"JOB_EXECUTION_ID" NUMBER(19,0) NOT NULL ENABLE, 
	"CONTENT_OBJECT_TYPE" VARCHAR2(10 ) NOT NULL ENABLE, 
	"CONTENT_PARAM_NAME" VARCHAR2(255 ), 
	"MIME_TYPE" VARCHAR2(50 ), 
	"S3_BUCKET" VARCHAR2(255 ), 
	"S3_KEY" VARCHAR2(1000 ), 
	"ORIGINAL_FILE_NAME" VARCHAR2(255 ), 
	"FILE_EXTENSION" VARCHAR2(255 ), 
	"FILE_SIZE" NUMBER(19,0), 
	"DATE_CREATED" TIMESTAMP (6), 
	"DATE_UPDATED" TIMESTAMP (6), 
	 CONSTRAINT "CMJL_JOB_CONTENT_PK" PRIMARY KEY ("ID")  ENABLE, 
	 CONSTRAINT "CMJL_JOB_CONTENT_FK" FOREIGN KEY ("JOB_EXECUTION_ID")
	  REFERENCES "CMJL_JOB_EXECUTION" ("JOB_EXECUTION_ID") ENABLE
   )  ;

  CREATE INDEX "CMJL_JOB_CONTENT_FK" ON "CMJL_JOB_CONTENT" ("JOB_EXECUTION_ID")  ;
  
  
  CREATE TABLE "CMJL_JOB_ERROR_MESSAGES" 
   (	"ID" VARCHAR2(255 ) NOT NULL ENABLE, 
	"JOB_RESPONSE_ID" VARCHAR2(255 ) NOT NULL ENABLE, 
	"ERROR_MESSAGE" VARCHAR2(4000 ), 
	 PRIMARY KEY ("ID")  ENABLE, 
	 CONSTRAINT "FK_JOB_RESPONSE_ID" FOREIGN KEY ("JOB_RESPONSE_ID")
	  REFERENCES "CMJL_JOB_RESPONSE" ("ID") ENABLE
   )  ;

  CREATE INDEX "FK_JOB_RESPONSE_ID" ON "CMJL_JOB_ERROR_MESSAGES" ("JOB_RESPONSE_ID")  ;
